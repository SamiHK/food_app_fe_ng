<!-- <c-row *ngIf="isLoading else loadedBlock">
    <c-col>
        <c-spinner aria-hidden="true" label="Loading..." size="sm"></c-spinner> Loading...
    </c-col>
</c-row> -->
<c-row>
    <c-col>
        <c-card class="mb-4">
            <c-card-body>
                <span class="d-flex d-grid gap-2 float-end">
                    <a routerLink="create" cButton color="primary">Create New Menu</a>
                </span>
            </c-card-body>
        </c-card>
        <c-card *ngIf="isLoading else loadedBlock">
            <c-card-body>
                <c-spinner aria-hidden="true" label="Loading..." size="sm"></c-spinner> Loading...
            </c-card-body>
        </c-card>
        <ng-template #loadedBlock>
            <c-row *ngIf="(menus && menus.length > 0) else emptyMenuBlock" [gutter]="3" dragula="menus"
                [(dragulaModel)]="menus">
                <c-col [md]="6" [xs]="12" *ngFor="let m of menus">
                    <c-card class="d-flex flex-row">
                        <img [cCardImg] [src]="m.primaryImg" class="img-md">
                        <c-card-body class="d-flex d-block flex-column gap-1">
                            <span class="d-flex justify-content-between">
                                <span class="d-flex gap-2 align-items-center">
                                    <h6 cCardTitle class="">{{m.title}}</h6>
                                </span>
                                <span>
                                    <app-input-switch label="Is Active" [status]="m.isActive" [id]="m.id"
                                        (onChange)="updateIsActive($event)"></app-input-switch>
                                </span>
                            </span>
                            <p *ngIf="m.description" cCardText class="mb-1 text-wrap text-truncate">{{m.description}}</p>
                            <span class="flex-grow-1"></span>
                            <span
                                class="d-flex flex-grow-lg-1 flex-md-row flex-column align-items-lg-end justify-content-md-between gap-2">
                                <a cButton [routerLink]="[m.id]" size="sm" color="light" class="position-relative">
                                    <c-badge color="primary" shape="rounded-pill"
                                        class="position-absolute top-0 start-100 translate-middle">{{m.totalItems}}
                                    </c-badge>
                                    Items
                                </a>
                                <span class="d-flex d-grid gap-2 flex-row justify-content-end">
                                    <app-upload-button (imageChange)="updateImage($event)" size="sm"
                                        label='Update Image' [id]="m.id"></app-upload-button>
                                    <a cButton [routerLink]="[m.id, 'edit']" size="sm" color="light">Edit</a>
                                </span>
                            </span>
                        </c-card-body>
                    </c-card>
                </c-col>
            </c-row>
            <ng-template #emptyMenuBlock>
                <c-card>
                    <c-card-body>
                        Empty
                    </c-card-body>
                </c-card>
            </ng-template>
        </ng-template>
    </c-col>
</c-row>