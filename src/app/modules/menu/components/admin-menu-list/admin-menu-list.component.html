<c-row *ngIf="isLoading else loadedBlock">
    <c-col>
        <c-spinner aria-hidden="true" label="Loading..." size="sm"></c-spinner> Loading...
    </c-col>
</c-row>
<ng-template #loadedBlock>
    <c-row>
        <c-col sm="6" md="4" class="max-h-100vh">
            <c-card>
                <c-card-body>
                    <c-row class="mb-3">
                        <c-col class="">
                            <span class="float-end">
                                <a routerLink="../create" cButton color="primary">Create New Menu</a>
                            </span>
                        </c-col>
                    </c-row>
                    <perfect-scrollbar>
                        <ul flush cListGroup dragula="menus" [(dragulaModel)]="menus">
                            <a *ngFor="let m of menus" cListGroupItem 
                                [routerLink]="['../', m.id]" routerLinkActive="active"
                                class="d-flex justify-content-between align-items-center border-0 my-1 rounded">
                                <span>
                                    <h6 class="my-1">{{m.title}}</h6>
                                </span>
                                <c-badge *ngIf="m.totalItems" color="primary" shape="rounded-pill" class="float-end">{{m.totalItems}}</c-badge>
                            </a>
                        </ul>
                    </perfect-scrollbar>
                </c-card-body>
            </c-card>
        </c-col>
        <c-col sm="6" md="8">
            <ng-template [ngIf]="selectedMenu" [ngIfElse]="emptyblock">
                <c-card>
                    <c-card-body>
                        <img *ngIf="selectedMenu.primaryImg" [cCardImg] class="mb-3" [src]="selectedMenu.primaryImg">
                        <span class="d-flex justify-content-between">
                            <h3 cCardTitle>{{selectedMenu.title}}</h3>
                            <span class="d-block-inline">
                                <a routerLink="edit" cButton color="light" size="sm">Edit</a>
                            </span>
                        </span>
                        <p cCardText>{{selectedMenu.description}}</p>
                    </c-card-body>
                </c-card>
                <c-card class="mb-3">
                    <c-card-body class="d-flex d-grid gap-2 justify-content-between">
                        <span>
                            <app-upload-button (imageChange)="updateImages($event)" label='Update Image'></app-upload-button>
                        </span>
                        <a routerLink="item/create" routerLinkActive="disabled" cButton>Add New Item</a>
                    </c-card-body>
                </c-card>
            </ng-template>
            <ng-template #emptyblock>
                <c-card>
                    <c-card-body>
                        Something gone wrong
                    </c-card-body>
                </c-card>
            </ng-template>
            <router-outlet></router-outlet>
        </c-col>
    </c-row>
</ng-template>